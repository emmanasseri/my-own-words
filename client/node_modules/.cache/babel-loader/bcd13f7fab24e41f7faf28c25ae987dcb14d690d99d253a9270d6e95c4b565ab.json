{"ast":null,"code":"import { InvalidAddressError } from '../errors/address.js';\nimport { InvalidBytesLengthError } from '../errors/data.js';\nimport { AccountStateConflictError, StateAssignmentConflictError } from '../errors/stateOverride.js';\nimport { isAddress } from './address/isAddress.js';\nimport { numberToHex } from './encoding/toHex.js';\n/** @internal */\nexport function serializeStateMapping(stateMapping) {\n  if (!stateMapping || stateMapping.length === 0) return undefined;\n  return stateMapping.reduce((acc, _ref) => {\n    let {\n      slot,\n      value\n    } = _ref;\n    if (slot.length !== 66) throw new InvalidBytesLengthError({\n      size: slot.length,\n      targetSize: 66,\n      type: 'hex'\n    });\n    if (value.length !== 66) throw new InvalidBytesLengthError({\n      size: value.length,\n      targetSize: 66,\n      type: 'hex'\n    });\n    acc[slot] = value;\n    return acc;\n  }, {});\n}\n/** @internal */\nexport function serializeAccountStateOverride(parameters) {\n  const {\n    balance,\n    nonce,\n    state,\n    stateDiff,\n    code\n  } = parameters;\n  const rpcAccountStateOverride = {};\n  if (code !== undefined) rpcAccountStateOverride.code = code;\n  if (balance !== undefined) rpcAccountStateOverride.balance = numberToHex(balance);\n  if (nonce !== undefined) rpcAccountStateOverride.nonce = numberToHex(nonce);\n  if (state !== undefined) rpcAccountStateOverride.state = serializeStateMapping(state);\n  if (stateDiff !== undefined) {\n    if (rpcAccountStateOverride.state) throw new StateAssignmentConflictError();\n    rpcAccountStateOverride.stateDiff = serializeStateMapping(stateDiff);\n  }\n  return rpcAccountStateOverride;\n}\n/** @internal */\nexport function serializeStateOverride(parameters) {\n  if (!parameters) return undefined;\n  const rpcStateOverride = {};\n  for (const {\n    address,\n    ...accountState\n  } of parameters) {\n    if (!isAddress(address, {\n      strict: false\n    })) throw new InvalidAddressError({\n      address\n    });\n    if (rpcStateOverride[address]) throw new AccountStateConflictError({\n      address: address\n    });\n    rpcStateOverride[address] = serializeAccountStateOverride(accountState);\n  }\n  return rpcStateOverride;\n}","map":{"version":3,"names":["InvalidAddressError","InvalidBytesLengthError","AccountStateConflictError","StateAssignmentConflictError","isAddress","numberToHex","serializeStateMapping","stateMapping","length","undefined","reduce","acc","_ref","slot","value","size","targetSize","type","serializeAccountStateOverride","parameters","balance","nonce","state","stateDiff","code","rpcAccountStateOverride","serializeStateOverride","rpcStateOverride","address","accountState","strict"],"sources":["/Users/emmanasseri/Desktop/my-own-words/client/node_modules/viem/utils/stateOverride.ts"],"sourcesContent":["import {\n  InvalidAddressError,\n  type InvalidAddressErrorType,\n} from '../errors/address.js'\nimport {\n  InvalidBytesLengthError,\n  type InvalidBytesLengthErrorType,\n} from '../errors/data.js'\nimport {\n  AccountStateConflictError,\n  type AccountStateConflictErrorType,\n  StateAssignmentConflictError,\n  type StateAssignmentConflictErrorType,\n} from '../errors/stateOverride.js'\nimport type {\n  RpcAccountStateOverride,\n  RpcStateMapping,\n  RpcStateOverride,\n} from '../types/rpc.js'\nimport type { StateMapping, StateOverride } from '../types/stateOverride.js'\nimport { isAddress } from './address/isAddress.js'\nimport { type NumberToHexErrorType, numberToHex } from './encoding/toHex.js'\n\ntype SerializeStateMappingParameters = StateMapping | undefined\n\ntype SerializeStateMappingErrorType = InvalidBytesLengthErrorType\n\n/** @internal */\nexport function serializeStateMapping(\n  stateMapping: SerializeStateMappingParameters,\n): RpcStateMapping | undefined {\n  if (!stateMapping || stateMapping.length === 0) return undefined\n  return stateMapping.reduce((acc, { slot, value }) => {\n    if (slot.length !== 66)\n      throw new InvalidBytesLengthError({\n        size: slot.length,\n        targetSize: 66,\n        type: 'hex',\n      })\n    if (value.length !== 66)\n      throw new InvalidBytesLengthError({\n        size: value.length,\n        targetSize: 66,\n        type: 'hex',\n      })\n    acc[slot] = value\n    return acc\n  }, {} as RpcStateMapping)\n}\n\ntype SerializeAccountStateOverrideParameters = Omit<\n  StateOverride[number],\n  'address'\n>\n\ntype SerializeAccountStateOverrideErrorType =\n  | NumberToHexErrorType\n  | StateAssignmentConflictErrorType\n  | SerializeStateMappingErrorType\n\n/** @internal */\nexport function serializeAccountStateOverride(\n  parameters: SerializeAccountStateOverrideParameters,\n): RpcAccountStateOverride {\n  const { balance, nonce, state, stateDiff, code } = parameters\n  const rpcAccountStateOverride: RpcAccountStateOverride = {}\n  if (code !== undefined) rpcAccountStateOverride.code = code\n  if (balance !== undefined)\n    rpcAccountStateOverride.balance = numberToHex(balance)\n  if (nonce !== undefined) rpcAccountStateOverride.nonce = numberToHex(nonce)\n  if (state !== undefined)\n    rpcAccountStateOverride.state = serializeStateMapping(state)\n  if (stateDiff !== undefined) {\n    if (rpcAccountStateOverride.state) throw new StateAssignmentConflictError()\n    rpcAccountStateOverride.stateDiff = serializeStateMapping(stateDiff)\n  }\n  return rpcAccountStateOverride\n}\n\ntype SerializeStateOverrideParameters = StateOverride | undefined\n\nexport type SerializeStateOverrideErrorType =\n  | InvalidAddressErrorType\n  | AccountStateConflictErrorType\n  | SerializeAccountStateOverrideErrorType\n\n/** @internal */\nexport function serializeStateOverride(\n  parameters?: SerializeStateOverrideParameters,\n): RpcStateOverride | undefined {\n  if (!parameters) return undefined\n  const rpcStateOverride: RpcStateOverride = {}\n  for (const { address, ...accountState } of parameters) {\n    if (!isAddress(address, { strict: false }))\n      throw new InvalidAddressError({ address })\n    if (rpcStateOverride[address])\n      throw new AccountStateConflictError({ address: address })\n    rpcStateOverride[address] = serializeAccountStateOverride(accountState)\n  }\n  return rpcStateOverride\n}\n"],"mappings":"AAAA,SACEA,mBAAmB,QAEd,sBAAsB;AAC7B,SACEC,uBAAuB,QAElB,mBAAmB;AAC1B,SACEC,yBAAyB,EAEzBC,4BAA4B,QAEvB,4BAA4B;AAOnC,SAASC,SAAS,QAAQ,wBAAwB;AAClD,SAAoCC,WAAW,QAAQ,qBAAqB;AAM5E;AACA,OAAM,SAAUC,qBAAqBA,CACnCC,YAA6C;EAE7C,IAAI,CAACA,YAAY,IAAIA,YAAY,CAACC,MAAM,KAAK,CAAC,EAAE,OAAOC,SAAS;EAChE,OAAOF,YAAY,CAACG,MAAM,CAAC,CAACC,GAAG,EAAAC,IAAA,KAAqB;IAAA,IAAnB;MAAEC,IAAI;MAAEC;IAAK,CAAE,GAAAF,IAAA;IAC9C,IAAIC,IAAI,CAACL,MAAM,KAAK,EAAE,EACpB,MAAM,IAAIP,uBAAuB,CAAC;MAChCc,IAAI,EAAEF,IAAI,CAACL,MAAM;MACjBQ,UAAU,EAAE,EAAE;MACdC,IAAI,EAAE;KACP,CAAC;IACJ,IAAIH,KAAK,CAACN,MAAM,KAAK,EAAE,EACrB,MAAM,IAAIP,uBAAuB,CAAC;MAChCc,IAAI,EAAED,KAAK,CAACN,MAAM;MAClBQ,UAAU,EAAE,EAAE;MACdC,IAAI,EAAE;KACP,CAAC;IACJN,GAAG,CAACE,IAAI,CAAC,GAAGC,KAAK;IACjB,OAAOH,GAAG;EACZ,CAAC,EAAE,EAAqB,CAAC;AAC3B;AAYA;AACA,OAAM,SAAUO,6BAA6BA,CAC3CC,UAAmD;EAEnD,MAAM;IAAEC,OAAO;IAAEC,KAAK;IAAEC,KAAK;IAAEC,SAAS;IAAEC;EAAI,CAAE,GAAGL,UAAU;EAC7D,MAAMM,uBAAuB,GAA4B,EAAE;EAC3D,IAAID,IAAI,KAAKf,SAAS,EAAEgB,uBAAuB,CAACD,IAAI,GAAGA,IAAI;EAC3D,IAAIJ,OAAO,KAAKX,SAAS,EACvBgB,uBAAuB,CAACL,OAAO,GAAGf,WAAW,CAACe,OAAO,CAAC;EACxD,IAAIC,KAAK,KAAKZ,SAAS,EAAEgB,uBAAuB,CAACJ,KAAK,GAAGhB,WAAW,CAACgB,KAAK,CAAC;EAC3E,IAAIC,KAAK,KAAKb,SAAS,EACrBgB,uBAAuB,CAACH,KAAK,GAAGhB,qBAAqB,CAACgB,KAAK,CAAC;EAC9D,IAAIC,SAAS,KAAKd,SAAS,EAAE;IAC3B,IAAIgB,uBAAuB,CAACH,KAAK,EAAE,MAAM,IAAInB,4BAA4B,EAAE;IAC3EsB,uBAAuB,CAACF,SAAS,GAAGjB,qBAAqB,CAACiB,SAAS,CAAC;EACtE;EACA,OAAOE,uBAAuB;AAChC;AASA;AACA,OAAM,SAAUC,sBAAsBA,CACpCP,UAA6C;EAE7C,IAAI,CAACA,UAAU,EAAE,OAAOV,SAAS;EACjC,MAAMkB,gBAAgB,GAAqB,EAAE;EAC7C,KAAK,MAAM;IAAEC,OAAO;IAAE,GAAGC;EAAY,CAAE,IAAIV,UAAU,EAAE;IACrD,IAAI,CAACf,SAAS,CAACwB,OAAO,EAAE;MAAEE,MAAM,EAAE;IAAK,CAAE,CAAC,EACxC,MAAM,IAAI9B,mBAAmB,CAAC;MAAE4B;IAAO,CAAE,CAAC;IAC5C,IAAID,gBAAgB,CAACC,OAAO,CAAC,EAC3B,MAAM,IAAI1B,yBAAyB,CAAC;MAAE0B,OAAO,EAAEA;IAAO,CAAE,CAAC;IAC3DD,gBAAgB,CAACC,OAAO,CAAC,GAAGV,6BAA6B,CAACW,YAAY,CAAC;EACzE;EACA,OAAOF,gBAAgB;AACzB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}