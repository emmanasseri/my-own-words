{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Box,Text,Image,Button}from\"@chakra-ui/react\";import{useNavigate}from\"react-router-dom\";import{useLoading}from\"../contexts/LoadingContext\";// Import the loading hook\nimport{uploadToIPFS,mintText}from\"../components/Register/Mint\";import theme from\"../theme\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const[selectedText,setSelectedText]=useState(\"\");// State to track selected text\nconst[buttonEnabled,setButtonEnabled]=useState(false);// State to track button enable/disable\nconst{setIsLoading}=useLoading();// Hook to trigger loading\nconst navigate=useNavigate();// Hook for navigation\n// Function to handle text selection in the browser\nconst handleTextSelection=()=>{var _window$getSelection;const selectedText=((_window$getSelection=window.getSelection())===null||_window$getSelection===void 0?void 0:_window$getSelection.toString())||\"\";setSelectedText(selectedText);setButtonEnabled(selectedText.length>0);// Enable button if text is selected\n};// Listen for text selection in the window\nuseEffect(()=>{document.addEventListener(\"mouseup\",handleTextSelection);// Cleanup event listener when component unmounts\nreturn()=>{document.removeEventListener(\"mouseup\",handleTextSelection);};},[]);// Function to handle the minting process when button is clicked\nconst handleMint=()=>{if(selectedText){setIsLoading(true);// Start loading\nuploadToIPFS(selectedText);// Call the mint function (without hooks inside Mint.tsx)\nmintText(selectedText);// Simulate a 1-second delay, then navigate to home\nsetTimeout(()=>{setIsLoading(false);// Stop loading\nnavigate(\"/home\");// Navigate to home page\n},1000);}};return/*#__PURE__*/_jsxs(Box,{p:6,width:theme.views.expandedView.width,height:theme.views.expandedView.height,mx:\"auto\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",gap:6,children:[/*#__PURE__*/_jsx(Text,{fontSize:\"2xl\",fontWeight:\"bold\",children:\"Highlight text to register it as IP\"}),/*#__PURE__*/_jsx(Image,{src:\"/images/register-ip.png\"// Replace with the actual image path\n,alt:\"Register IP\",maxW:\"100%\",mb:4}),/*#__PURE__*/_jsx(Text,{fontSize:\"md\",textAlign:\"left\",width:\"100%\",children:\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.\"}),/*#__PURE__*/_jsx(Button,{bg:buttonEnabled?\"blue.500\":\"gray.400\",color:\"white\",_hover:buttonEnabled?{bg:\"blue.600\"}:{},disabled:!buttonEnabled// Disable button if no text is selected\n,width:\"100%\",onClick:handleMint,children:\"Mint Selected Text\"})]});};export default Register;","map":{"version":3,"names":["React","useState","useEffect","Box","Text","Image","Button","useNavigate","useLoading","uploadToIPFS","mintText","theme","jsx","_jsx","jsxs","_jsxs","Register","selectedText","setSelectedText","buttonEnabled","setButtonEnabled","setIsLoading","navigate","handleTextSelection","_window$getSelection","window","getSelection","toString","length","document","addEventListener","removeEventListener","handleMint","setTimeout","p","width","views","expandedView","height","mx","display","flexDirection","alignItems","gap","children","fontSize","fontWeight","src","alt","maxW","mb","textAlign","bg","color","_hover","disabled","onClick"],"sources":["/Users/emmanasseri/Desktop/my-own-words/src/pages/Register.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Box, Text, Image, Button } from \"@chakra-ui/react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useLoading } from \"../contexts/LoadingContext\"; // Import the loading hook\nimport { uploadToIPFS, mintText } from \"../components/Register/Mint\";\nimport theme from \"../theme\";\n\nconst Register: React.FC = () => {\n  const [selectedText, setSelectedText] = useState(\"\"); // State to track selected text\n  const [buttonEnabled, setButtonEnabled] = useState(false); // State to track button enable/disable\n  const { setIsLoading } = useLoading(); // Hook to trigger loading\n  const navigate = useNavigate(); // Hook for navigation\n\n  // Function to handle text selection in the browser\n  const handleTextSelection = () => {\n    const selectedText = window.getSelection()?.toString() || \"\";\n    setSelectedText(selectedText);\n    setButtonEnabled(selectedText.length > 0); // Enable button if text is selected\n  };\n\n  // Listen for text selection in the window\n  useEffect(() => {\n    document.addEventListener(\"mouseup\", handleTextSelection);\n\n    // Cleanup event listener when component unmounts\n    return () => {\n      document.removeEventListener(\"mouseup\", handleTextSelection);\n    };\n  }, []);\n\n  // Function to handle the minting process when button is clicked\n  const handleMint = () => {\n    if (selectedText) {\n      setIsLoading(true); // Start loading\n      uploadToIPFS(selectedText); \n      // Call the mint function (without hooks inside Mint.tsx)\n      mintText(selectedText);\n\n      // Simulate a 1-second delay, then navigate to home\n      setTimeout(() => {\n        setIsLoading(false); // Stop loading\n        navigate(\"/home\"); // Navigate to home page\n      }, 1000);\n    }\n  };\n\n  return (\n    <Box\n      p={6}\n      width={theme.views.expandedView.width}\n      height={theme.views.expandedView.height}\n      mx=\"auto\"\n      display=\"flex\"\n      flexDirection=\"column\"\n      alignItems=\"center\"\n      gap={6}\n    >\n      {/* Heading */}\n      <Text fontSize=\"2xl\" fontWeight=\"bold\">\n        Highlight text to register it as IP\n      </Text>\n\n      {/* Image */}\n      <Image\n        src=\"/images/register-ip.png\" // Replace with the actual image path\n        alt=\"Register IP\"\n        maxW=\"100%\"\n        mb={4}\n      />\n\n      {/* Block of text to highlight */}\n      <Text fontSize=\"md\" textAlign=\"left\" width=\"100%\">\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec\n        odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla\n        quis sem at nibh elementum imperdiet. Duis sagittis ipsum. Praesent\n        mauris. Fusce nec tellus sed augue semper porta. Mauris massa.\n        Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad\n        litora torquent per conubia nostra, per inceptos himenaeos.\n      </Text>\n\n      {/* Mint button (grayed out until text is selected) */}\n      <Button\n        bg={buttonEnabled ? \"blue.500\" : \"gray.400\"}\n        color=\"white\"\n        _hover={buttonEnabled ? { bg: \"blue.600\" } : {}}\n        disabled={!buttonEnabled} // Disable button if no text is selected\n        width=\"100%\"\n        onClick={handleMint}\n      >\n        Mint Selected Text\n      </Button>\n    </Box>\n  );\n};\n\nexport default Register;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}